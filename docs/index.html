<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Runnify - v1.6.19</title><meta name="description" content="Documentation for Runnify"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Runnify - v1.6.19</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>Runnify - v1.6.19</h2></div><div class="tsd-panel tsd-typography"><a id="md:üèÉüèº‚ôÇÔ∏è‚û°Ô∏èüèÉüèº‚û°Ô∏è-runnify-üèÉüèΩ‚ôÄÔ∏è‚û°Ô∏è" class="tsd-anchor"></a><h1><a href="#md:üèÉüèº‚ôÇÔ∏è‚û°Ô∏èüèÉüèº‚û°Ô∏è-runnify-üèÉüèΩ‚ôÄÔ∏è‚û°Ô∏è">üèÉüèº‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏èüèÉüèº‚Äç‚û°Ô∏è Runnify üèÉüèΩ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è</a></h1><p>Typescript library that allows you to create chains of executable code to manipulate an initial state.</p>
<p>It has the following features:</p>
<ul>
<li>The state is immutable</li>
<li>Execution can be in parallel</li>
<li>Every step can be async</li>
<li>It can be used in <strong>streaming</strong> as a Transformer</li>
<li>Implements an event emitter to let emit events during the execution. Emitted events can be listened to for telemetry purposes or to send progressive responses to clients</li>
<li>For each chain or for each step in the chain it is possible to set:<ul>
<li>Retry</li>
<li>Cache</li>
<li>Timeout</li>
<li>Fallback</li>
<li>Circuit Breaker</li>
<li>Bulk Head Limiter</li>
</ul>
</li>
<li>Natively implements <strong>OpenTelemetry</strong> to track each execution step</li>
<li>Perform conditional jumps within the chain (eg. to do loops or to act as node graph)</li>
<li>Execute loops for iterable state objects (eg. Arrays)</li>
<li>Pass a context to the chain to make it available to all steps </li>
<li>Nest chains within chains</li>
<li>Use Zod to manipulate the state</li>
</ul>
<a id="md:install" class="tsd-anchor"></a><h2><a href="#md:install">Install</a></h2><pre><code class="language-javascript"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">runnify</span>
</code><button>Copy</button></pre>
<a id="md:examples" class="tsd-anchor"></a><h2><a href="#md:examples">Examples</a></h2><ul>
<li><a href="#md:nested-chains">Chain with nested chains</a></li>
<li><a href="#md:loops">Loops</a></li>
<li><a href="#md:streaming">Streaming</a></li>
<li><a href="#md:circuit">Retry, Cache, Fallback and Timeout</a></li>
<li><a href="#md:goto">Goto</a></li>
<li><a href="#md:context">External Context</a></li>
<li><a href="#md:zod">Zod State Manipulation</a></li>
<li><a href="#md:progressive">Progressive Response (HTTP SSE)</a></li>
<li><a href="#md:steps">Stream Steps</a></li>
<li><a href="#md:opentelemetry">OpenTelemetry</a></li>
</ul>
<a id="md:chain-with-nested-chains" class="tsd-anchor"></a><h3><a href="#md:chain-with-nested-chains"><a id="nested-chains"></a>Chain with nested chains</a></h3><pre><code class="language-javascript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">subSequence</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">from</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    { </span><span class="hl-4">k</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> () </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-5">&quot;O&quot;</span><span class="hl-1">, </span><span class="hl-0">j:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">y</span><span class="hl-1"> = </span><span class="hl-5">&quot;ciao&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;sub:seq&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">subSubSequence</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">from</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    { </span><span class="hl-4">z</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> () </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-5">&quot;Z&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">y</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-5">&quot;Y&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;sub:sub:seq&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;full:main:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">assign</span><span class="hl-1">(</span><span class="hl-5">&quot;year&quot;</span><span class="hl-1">,() </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">.</span><span class="hl-4">getYear</span><span class="hl-1">(), { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;year&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">assign</span><span class="hl-1">({ </span><span class="hl-0">b:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> }, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;b&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">pipe</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">)</span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">joy</span><span class="hl-1"> = </span><span class="hl-5">&quot;high&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> {</span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> + </span><span class="hl-6">1</span><span class="hl-1">}</span><br/><span class="hl-1">  }, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;increment:a&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">,{</span><span class="hl-0">emit</span><span class="hl-1">}) </span><span class="hl-2">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">      </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> === </span><span class="hl-6">1</span><span class="hl-1">) </span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;check&quot;</span><span class="hl-1">, </span><span class="hl-5">&quot;a is ok&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  }, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;emit:check&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">setC</span><span class="hl-1">, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;set:c&quot;</span><span class="hl-1"> }) </span><span class="hl-9">// setC is a fnc</span><br/><span class="hl-1">  .</span><span class="hl-4">milestone</span><span class="hl-1">(</span><span class="hl-5">&quot;state:analyzed&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">subSequence</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-4">branch</span><span class="hl-1">(</span><br/><span class="hl-1">    [</span><br/><span class="hl-1">      { </span><span class="hl-0">if:</span><span class="hl-1"> </span><span class="hl-0">A_is_1</span><span class="hl-1">, </span><span class="hl-0">then:</span><span class="hl-1"> </span><span class="hl-0">subSubSequence</span><span class="hl-1"> },</span><br/><span class="hl-1">      { </span><span class="hl-0">if:</span><span class="hl-1"> </span><span class="hl-0">A_is_5</span><span class="hl-1">, </span><span class="hl-0">then:</span><span class="hl-1"> </span><span class="hl-0">setE</span><span class="hl-1"> }</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;on:a:1:or:5&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-4">parallel</span><span class="hl-1">([</span><span class="hl-0">setF</span><span class="hl-1">, </span><span class="hl-0">setG</span><span class="hl-1">], { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;set:f:and:g&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">go</span><span class="hl-1">(</span><br/><span class="hl-1">    [</span><br/><span class="hl-1">      { </span><span class="hl-0">to:</span><span class="hl-1"> </span><span class="hl-5">&quot;increment:a&quot;</span><span class="hl-1">, </span><span class="hl-0">if:</span><span class="hl-1"> </span><span class="hl-0">A_less_4</span><span class="hl-1"> },</span><br/><span class="hl-1">      { </span><span class="hl-0">to:</span><span class="hl-1"> </span><span class="hl-5">&quot;state:analyzed&quot;</span><span class="hl-1">, </span><span class="hl-0">if:</span><span class="hl-1"> </span><span class="hl-0">A_more_9</span><span class="hl-1"> }</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;go:checking:a&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-4">assign</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">blocks:</span><span class="hl-1"> [</span><br/><span class="hl-1">      { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1">, </span><span class="hl-0">items:</span><span class="hl-1"> [{ </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1"> }] },</span><br/><span class="hl-1">      { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">, </span><span class="hl-0">items:</span><span class="hl-1"> [{ </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1"> }] }</span><br/><span class="hl-1">    ]</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">processBlocks</span><span class="hl-1">) </span><span class="hl-9">// processBlocks is a nested chain</span><br/><span class="hl-1">  .</span><span class="hl-4">on</span><span class="hl-1">(</span><span class="hl-5">&quot;check&quot;</span><span class="hl-1">, (</span><span class="hl-0">msg</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">res</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">.</span><span class="hl-4">run</span><span class="hl-1">({ </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">0</span><span class="hl-1"> });</span>
</code><button>Copy</button></pre>
<a id="md:loops" class="tsd-anchor"></a><h3><a href="#md:loops"><a id="loops"></a>Loops</a></h3><pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">setBlockIndex</span><span class="hl-1"> = </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-0">index</span><span class="hl-1"> = </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">index</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">setBlockCheck</span><span class="hl-1"> = </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-0">check</span><span class="hl-1"> = </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">setItemTitle</span><span class="hl-1"> = </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-0">title</span><span class="hl-1"> = </span><span class="hl-5">&quot;title&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">setItemDescription</span><span class="hl-1"> = </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">element</span><span class="hl-1">.</span><span class="hl-0">description</span><span class="hl-1"> = </span><span class="hl-5">&quot;description&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">processBlock</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;block:chain&quot;</span><span class="hl-1"> }).</span><span class="hl-4">parallel</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><span class="hl-0">setBlockIndex</span><span class="hl-1">, </span><span class="hl-0">setBlockCheck</span><span class="hl-1">],</span><br/><span class="hl-1">  { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;set:index:and:check&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">processItems</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;items:chain&quot;</span><span class="hl-1"> }).</span><span class="hl-4">loop</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">key:</span><span class="hl-1"> </span><span class="hl-5">&quot;items&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">chain</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">chain</span><span class="hl-1">: </span><span class="hl-7">Runnable</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">chain</span><span class="hl-1">.</span><span class="hl-4">parallel</span><span class="hl-1">([</span><span class="hl-0">setItemTitle</span><span class="hl-1">, </span><span class="hl-0">setItemDescription</span><span class="hl-1">], {</span><br/><span class="hl-1">      </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;set:title:and:description&quot;</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">});</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">processBlocks</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;blocks:chain&quot;</span><span class="hl-1"> }).</span><span class="hl-4">loop</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">key:</span><span class="hl-1"> </span><span class="hl-5">&quot;blocks&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">chain</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">chain</span><span class="hl-1">: </span><span class="hl-7">Runnable</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">chain</span><span class="hl-1">.</span><span class="hl-4">parallel</span><span class="hl-1">([</span><span class="hl-0">processBlock</span><span class="hl-1">, </span><span class="hl-0">processItems</span><span class="hl-1">], {</span><br/><span class="hl-1">      </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;process:block:and:items&quot;</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;loop:seq&quot;</span><span class="hl-1"> }).</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">processBlocks</span><span class="hl-1">);</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">res</span><span class="hl-1"> = </span><span class="hl-0">res</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">main</span><br/><span class="hl-1">    .</span><span class="hl-4">run</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-0">blocks:</span><span class="hl-1"> [</span><br/><span class="hl-1">        { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1">, </span><span class="hl-0">items:</span><span class="hl-1"> [{ </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1"> }] },</span><br/><span class="hl-1">        { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">, </span><span class="hl-0">items:</span><span class="hl-1"> [{ </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> }, { </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1"> }] }</span><br/><span class="hl-1">      ]</span><br/><span class="hl-1">    })</span>
</code><button>Copy</button></pre>
<a id="md:streaming" class="tsd-anchor"></a><h3><a href="#md:streaming"><a id="streaming"></a>Streaming</a></h3><pre><code class="language-javascript"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">Readable</span><span class="hl-1">, </span><span class="hl-0">Writable</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;node:stream&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">pipeline</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;node:stream/promises&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-7">State</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">b</span><span class="hl-1">?: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">read</span><span class="hl-1">: </span><span class="hl-7">Readable</span><span class="hl-1"> = </span><span class="hl-0">Readable</span><span class="hl-1">.</span><span class="hl-4">from</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">Array</span><span class="hl-1">.</span><span class="hl-4">from</span><span class="hl-1">({ </span><span class="hl-0">length:</span><span class="hl-1"> </span><span class="hl-6">10</span><span class="hl-1"> }, (</span><span class="hl-0">_</span><span class="hl-1">, </span><span class="hl-0">a</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> ({ </span><span class="hl-0">a</span><span class="hl-1"> }))</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;stream:main:seq&quot;</span><span class="hl-1"> }).</span><span class="hl-4">assign</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">b</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> + </span><span class="hl-6">1</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">// get the transform stream from chain</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">transform</span><span class="hl-1"> = </span><span class="hl-0">main</span><span class="hl-1">.</span><span class="hl-4">stream</span><span class="hl-1">();</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">risultati</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">write</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">objectMode:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">write</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">_</span><span class="hl-1">, </span><span class="hl-0">next</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">risultati</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">state</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">next</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-4">pipeline</span><span class="hl-1">(</span><span class="hl-0">read</span><span class="hl-1">, </span><span class="hl-0">transform</span><span class="hl-1">, </span><span class="hl-0">write</span><span class="hl-1">);</span><br/>
</code><button>Copy</button></pre>
<a id="md:retry-cache-fallback-and-timeout" class="tsd-anchor"></a><h3><a href="#md:retry-cache-fallback-and-timeout"><a id="circuit"></a>Retry, Cache, Fallback and Timeout</a></h3><pre><code class="language-typescript"><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-0">errors</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><br/><span class="hl-9">// Retry</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">r</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;wrap:main:seq&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">circuit:</span><span class="hl-1"> { </span><span class="hl-0">retry:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1"> }</span><br/><span class="hl-1">}).</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-4">throwError</span><span class="hl-1">(): </span><span class="hl-7">never</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-8">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Error</span><span class="hl-1">(</span><span class="hl-5">`Error </span><span class="hl-2">${</span><span class="hl-1">++</span><span class="hl-0">errors</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">// Retry + Timeout</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">r</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;wrap:main:seq&quot;</span><br/><span class="hl-1">}).</span><span class="hl-4">push</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-4">throwError</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Error</span><span class="hl-1">(</span><span class="hl-5">`Error </span><span class="hl-2">${</span><span class="hl-1">++</span><span class="hl-0">errors</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  { </span><span class="hl-0">circuit:</span><span class="hl-1"> { </span><span class="hl-0">retry:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">, </span><span class="hl-0">timeout:</span><span class="hl-1"> </span><span class="hl-6">100000</span><span class="hl-1"> } }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-9">// Retry + Circuit Breaker</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">r</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;wrap:main:seq&quot;</span><br/><span class="hl-1">}).</span><span class="hl-4">push</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-4">throwError</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Error</span><span class="hl-1">(</span><span class="hl-5">`Error </span><span class="hl-2">${</span><span class="hl-1">++</span><span class="hl-0">errors</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  { </span><span class="hl-0">circuit:</span><span class="hl-1"> { </span><span class="hl-0">retry:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">, </span><span class="hl-0">circuitBreaker:</span><span class="hl-1"> { </span><span class="hl-0">consecutiveFaillures:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> } } }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-9">// Retry + Circuit Breaker + Fallback</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">r</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;wrap:main:seq&quot;</span><br/><span class="hl-1">}).</span><span class="hl-4">push</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-4">throwError</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Error</span><span class="hl-1">(</span><span class="hl-5">`Error </span><span class="hl-2">${</span><span class="hl-1">++</span><span class="hl-0">errors</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-0">circuit:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">retry:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">circuitBreaker:</span><span class="hl-1"> { </span><span class="hl-0">consecutiveFaillures:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">fallback</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-4">sleep</span><span class="hl-1">(</span><span class="hl-6">10</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-8">return</span><span class="hl-1"> { </span><span class="hl-0">fallback:</span><span class="hl-1"> </span><span class="hl-5">&quot;hallo&quot;</span><span class="hl-1"> };</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:goto" class="tsd-anchor"></a><h3><a href="#md:goto"><a id="goto"></a>Goto</a></h3><pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">seq</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;operators:pipe:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-4">pipe</span><span class="hl-1">(</span><br/><span class="hl-1">      (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> = (</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">) + </span><span class="hl-6">1</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;increment:a&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">    .</span><span class="hl-4">go</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-0">to:</span><span class="hl-1"> </span><span class="hl-5">&quot;increment:a&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> &lt; </span><span class="hl-6">10</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-4">pipe</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">c</span><span class="hl-1"> = </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> / </span><span class="hl-6">2</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">state</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">seq</span><span class="hl-1">.</span><span class="hl-4">run</span><span class="hl-1">({ </span><span class="hl-0">b:</span><span class="hl-1"> </span><span class="hl-6">0</span><span class="hl-1"> });</span>
</code><button>Copy</button></pre>
<a id="md:external-context" class="tsd-anchor"></a><h3><a href="#md:external-context"><a id="context"></a>External Context</a></h3><pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">ctx</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">get</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">key</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-5">&quot;value&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">gRPC:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">ingress:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">get</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> (</span><span class="hl-0">key</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-5">&quot;ingress&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;context:main:seq&quot;</span><span class="hl-1">, </span><span class="hl-0">ctx</span><span class="hl-1"> }).</span><span class="hl-4">assign</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">conf</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-0">ctx</span><span class="hl-1">.</span><span class="hl-0">config</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-5">&quot;key&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">remote</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-0">ctx</span><span class="hl-1">.</span><span class="hl-0">gRPC</span><span class="hl-1">.</span><span class="hl-0">ingress</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-5">&quot;key&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">state</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">.</span><span class="hl-4">run</span><span class="hl-1">({});</span>
</code><button>Copy</button></pre>
<a id="md:state-manipulation-zod" class="tsd-anchor"></a><h3><a href="#md:state-manipulation-zod"><a id="zod"></a>State Manipulation (Zod)</a></h3><pre><code class="language-typescript"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">z</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;zod&quot;</span><span class="hl-1">;</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">schema</span><span class="hl-1">: </span><span class="hl-7">z</span><span class="hl-1">.</span><span class="hl-7">ZodType</span><span class="hl-1"> = </span><span class="hl-0">z</span><span class="hl-1">.</span><span class="hl-4">object</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-0">z</span><span class="hl-1">.</span><span class="hl-4">string</span><span class="hl-1">(), </span><span class="hl-0">age:</span><span class="hl-1"> </span><span class="hl-0">z</span><span class="hl-1">.</span><span class="hl-4">number</span><span class="hl-1">() });</span><br/><br/><br/><span class="hl-9">// Simple Pick (array of keys)</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">simplePick</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;zod:pick:pipe:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">pick</span><span class="hl-1">([</span><span class="hl-5">&quot;keyA&quot;</span><span class="hl-1">,</span><span class="hl-5">&quot;keyB&quot;</span><span class="hl-1">], { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;pick:keysArray&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  </span><br/><span class="hl-9">// Zod Pick</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">pickSeq</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;zod:pick:seq&quot;</span><span class="hl-1"> }).</span><span class="hl-4">pick</span><span class="hl-1">(</span><span class="hl-0">schema</span><span class="hl-1">);</span><br/><br/><span class="hl-9">// Zod Pipe</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">pipeSeq</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;zod:pipe:seq&quot;</span><span class="hl-1"> }).</span><span class="hl-4">push</span><span class="hl-1">(</span><br/><span class="hl-1">  (</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">extra</span><span class="hl-1"> = </span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">extra</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  { </span><span class="hl-0">schema</span><span class="hl-1">, </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;pipe:pick&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-9">// Zod Pipe Pick</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">pipeAndPickSeq</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;zod:pipe:pick:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">, { </span><span class="hl-0">schema</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">pick</span><span class="hl-1">(</span><span class="hl-0">schema</span><span class="hl-1">, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;filter:egress&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">  </span><br/><span class="hl-9">// Zod Pick Pipe</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">pickAndPipeSeq</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;zod:pick:pipe:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">pick</span><span class="hl-1">(</span><span class="hl-0">schema</span><span class="hl-1">, { </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;filter:ingress&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">push</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:progressive-response-http-sse" class="tsd-anchor"></a><h3><a href="#md:progressive-response-http-sse"><a id="progressive"></a>Progressive Response (HTTP SSE)</a></h3><pre><code class="language-typescript"><span class="hl-8">import</span><span class="hl-1"> </span><span class="hl-0">Fastify</span><span class="hl-1"> </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;fastify&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">FastifySSEPlugin</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;fastify-sse-v2&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> </span><span class="hl-0">cors</span><span class="hl-1"> </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@fastify/cors&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">RunState</span><span class="hl-1">, </span><span class="hl-0">RunFncParams</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;../dist/types.js&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-7">State</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-7">RunState</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">done</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;progressive:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">, </span><span class="hl-0">done:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1"> });</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-2">function*</span><span class="hl-1"> </span><span class="hl-4">getProgress</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">emitter</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">EventEmitter</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-0">main</span><span class="hl-1">.</span><span class="hl-4">run</span><span class="hl-1">({}, { </span><span class="hl-0">emitter</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-8">for</span><span class="hl-1"> </span><span class="hl-8">await</span><span class="hl-1"> (</span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-3">state</span><span class="hl-1">] </span><span class="hl-2">of</span><span class="hl-1"> </span><span class="hl-4">on</span><span class="hl-1">(</span><span class="hl-0">emitter</span><span class="hl-1">, </span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-8">yield</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">done</span><span class="hl-1">) </span><span class="hl-8">break</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">fastify</span><span class="hl-1"> = </span><span class="hl-4">Fastify</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">logger:</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">});</span><br/><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-0">fastify</span><span class="hl-1">.</span><span class="hl-4">register</span><span class="hl-1">(</span><span class="hl-0">cors</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">origin:</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">});</span><br/><span class="hl-0">fastify</span><span class="hl-1">.</span><span class="hl-4">register</span><span class="hl-1">(</span><span class="hl-0">FastifySSEPlugin</span><span class="hl-1">);</span><br/><br/><span class="hl-0">fastify</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-5">&quot;/progress&quot;</span><span class="hl-1">, </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-4">sse</span><span class="hl-1">(</span><span class="hl-4">getProgress</span><span class="hl-1">());</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:stream-steps" class="tsd-anchor"></a><h3><a href="#md:stream-steps"><a id="#steps"></a>Stream Steps</a></h3><pre><code class="language-typescript"><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-7">State</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-7">RunState</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">a</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">done</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">main</span><span class="hl-1"> = </span><span class="hl-0">Runnable</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">({ </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;progressive:seq&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1"> });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1"> });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-4">passThrough</span><span class="hl-1">((</span><span class="hl-0">state</span><span class="hl-1">: </span><span class="hl-7">State</span><span class="hl-1">, </span><span class="hl-0">params</span><span class="hl-1">: </span><span class="hl-7">RunFncParams</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">params</span><span class="hl-1">.</span><span class="hl-4">emit</span><span class="hl-1">(</span><span class="hl-5">&quot;progress&quot;</span><span class="hl-1">, { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">, </span><span class="hl-0">done:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1"> });</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><br/><span class="hl-1"> </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">states</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-8">for</span><span class="hl-1"> </span><span class="hl-8">await</span><span class="hl-1"> (</span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">step</span><span class="hl-1"> </span><span class="hl-2">of</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">.</span><span class="hl-4">streamSteps</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-0">states</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">step</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-0">step</span><span class="hl-1">.</span><span class="hl-0">type</span><span class="hl-1"> === </span><span class="hl-5">&quot;end&quot;</span><span class="hl-1">) </span><span class="hl-8">break</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:opentelemetry" class="tsd-anchor"></a><h3><a href="#md:opentelemetry"><a id="opentelemetry"></a>OpenTelemetry</a></h3><pre><code class="language-javascript"><span class="hl-9">// instrumentation.js</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">NodeSDK</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/sdk-node&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">ConsoleSpanExporter</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/sdk-trace-node&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">Resource</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/resources&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">SEMRESATTRS_SERVICE_NAME</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">SEMRESATTRS_SERVICE_VERSION</span><br/><span class="hl-1">} </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/semantic-conventions&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">SimpleSpanProcessor</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/sdk-trace-base&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">JaegerExporter</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/exporter-jaeger&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">PrometheusExporter</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/exporter-prometheus&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">getNodeAutoInstrumentations</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@opentelemetry/auto-instrumentations-node&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-3">sdk</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">NodeSDK</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">resource:</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">Resource</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">[</span><span class="hl-3">SEMRESATTRS_SERVICE_NAME</span><span class="hl-0">]:</span><span class="hl-1"> </span><span class="hl-5">&quot;Runnify&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">[</span><span class="hl-3">SEMRESATTRS_SERVICE_VERSION</span><span class="hl-0">]:</span><span class="hl-1"> </span><span class="hl-5">&quot;1.0&quot;</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">  </span><span class="hl-0">spanProcessors:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">SimpleSpanProcessor</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">JaegerExporter</span><span class="hl-1">())</span><br/><span class="hl-1">    </span><span class="hl-9">//new SimpleSpanProcessor(new ConsoleSpanExporter())</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-0">metricReader:</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-4">PrometheusExporter</span><span class="hl-1">(),</span><br/><span class="hl-1">  </span><span class="hl-0">instrumentations:</span><span class="hl-1"> [</span><span class="hl-4">getNodeAutoInstrumentations</span><span class="hl-1">()]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">sdk</span><span class="hl-1">.</span><span class="hl-4">start</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p>Licensed under <a href="./LICENSE">MIT</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-alpha" name="alpha"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Alpha</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-beta" name="beta"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Beta</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:üèÉüèº‚ôÇÔ∏è‚û°Ô∏èüèÉüèº‚û°Ô∏è-runnify-üèÉüèΩ‚ôÄÔ∏è‚û°Ô∏è"><span>üèÉüèº‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏èüèÉüèº‚Äç‚û°Ô∏è <wbr/>Runnify üèÉüèΩ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è</span></a><ul><li><a href="#md:install"><span>Install</span></a></li><li><a href="#md:examples"><span>Examples</span></a></li><li><ul><li><a href="#md:chain-with-nested-chains"><span>Chain with nested chains</span></a></li><li><a href="#md:loops"><span>Loops</span></a></li><li><a href="#md:streaming"><span>Streaming</span></a></li><li><a href="#md:retry-cache-fallback-and-timeout"><span>Retry, <wbr/>Cache, <wbr/>Fallback and <wbr/>Timeout</span></a></li><li><a href="#md:goto"><span>Goto</span></a></li><li><a href="#md:external-context"><span>External <wbr/>Context</span></a></li><li><a href="#md:state-manipulation-zod"><span>State <wbr/>Manipulation (<wbr/>Zod)</span></a></li><li><a href="#md:progressive-response-http-sse"><span>Progressive <wbr/>Response (HTTP SSE)</span></a></li><li><a href="#md:stream-steps"><span>Stream <wbr/>Steps</span></a></li><li><a href="#md:opentelemetry"><span>Open<wbr/>Telemetry</span></a></li></ul></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Runnify - v1.6.19</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>